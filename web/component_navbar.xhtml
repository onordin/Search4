<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough">

	<h:head>
	
		<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
    	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
    	<meta name="viewport" content="width=device-width, initial-scale=1" />	
		
		<title>Search4</title>
		
		<link rel="stylesheet" href="resources/css/bootstrap.min.css" />
		<link rel="stylesheet" href="resources/css/bootstrap-theme.min.css" />
		<link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" />
		<link rel="stylesheet" href="resources/css/style.css" />

	</h:head>

	<h:body>
	
	<!-- If user are NOT logged in -->
		<ui:fragment rendered="#{userBean.userIsLoggedIn == null}">
		
		<!-- Static navbar -->

	    <div class="navbar navbar-inverse navbar-static-top">
	      <div class="container">
	        <div class="navbar-header">
	          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
	            <span class="sr-only">Toggle navigation</span>
	            <span class="icon-bar"></span>
	            <span class="icon-bar"></span>
	            <span class="icon-bar"></span>
	          </button>

	          <a class="navbar-brand title" href="full_startpage.xhtml">Search movie</a>
	        
	        </div>
	        <div id="navbar" class="navbar-collapse collapse">

	          	<h:form class="navbar-form navbar-right">
		            <div class="form-group">
		              <h:inputText type="email" id="inputEmail" class="form-control" 
		              		value="#{userBean.email}" p:placeholder="Email address" 
		              		required="true" />
		            </div>
		            <div class="form-group">
		              <h:inputSecret type="password" id="inputPassword" class="form-control" 
		              		value="#{userBean.password}" p:placeholder="Password" 
		              		required="true" />
		            </div>
		            <div class="form-group">
		            	<h:commandButton type="submit" action="#{userBean.loginUser()}" class="btn" value="Sign in">
		            		<f:setPropertyActionListener value="#{view.viewId}" target="#{userBean.viewId}"></f:setPropertyActionListener>
							<f:setPropertyActionListener value="#{displayBean.movieId}" target="#{userBean.id}"></f:setPropertyActionListener>	
							<f:event listener="#{displayBean.postInit()}" type="preRenderView"></f:event>
		            	</h:commandButton>
		            </div>
		            <div class="form-group">
			            <table class="navbar-right">
			            	<tr>
			            		<td>
			            			<a href="full_register.xhtml" class="register-password">Register</a>
			            		</td>
			            	</tr>
			            	<tr>
			            		<td>
			            			<a href="full_forgot_password.xhtml" class="register-password">Forgot password</a>
			            		</td>
			            	</tr>
			            </table>
					</div>
	          	</h:form>
        	</div><!--/.nav-collapse -->
	      </div>
	    </div>
	    
	    </ui:fragment>
	    
	<!-- If user are logged in -->
		<ui:fragment rendered="#{userBean.userIsLoggedIn != null}">
			<div class="navbar navbar-inverse navbar-static-top">
		      <div class="container">
		        <div class="navbar-header">
		        
		          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
		            <span class="sr-only">Toggle navigation</span>
		            <span class="icon-bar"></span>
		            <span class="icon-bar"></span>
		            <span class="icon-bar"></span>
		          </button>

		          <a class="navbar-brand title" href="full_startpage.xhtml">Search movie</a>
		        </div>
		      
	        	<div id="navbar" class="navbar-collapse collapse">
	        	<h:form class="navbar-form navbar-right">
         			<ul class="nav navbar-nav navbar-right">
            			<li><h:commandButton type="submit" class="log-off" action="#{userBean.viewProfile()}" value="Profile"></h:commandButton></li>
			            <li><h:commandButton type="submit" class="log-off" action="#{userBean.logOffUser()}" value="Log off"></h:commandButton></li>
          			</ul>
          			</h:form>
        		</div>

		      </div>
		    </div>
	    </ui:fragment>

		<script type='text/javascript' src="https://cdn.rawgit.com/jamesallardice/Placeholders.js/master/dist/placeholders.min.js"></script>
		<script src="resources/js/jquery-3.1.0.min.js" />
		<script src="resources/js/bootstrap.min.js" />
		<!-- IE10 viewport hack for Surface/desktop Windows 8 bug (TA BORT?!) -->
    	<script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>

   	</h:body>

</html>
	    